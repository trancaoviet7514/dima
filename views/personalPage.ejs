<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">

    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
    <link rel="stylesheet" href="css/personalPage.css">
    <link rel="stylesheet" href="css/dialogUpload.css">
    <link rel="stylesheet" href="css/editDialog.css">
    <link rel="stylesheet" href="css/deleteDialog.css">
</head>

<body>
    <div class="top-nav-bar">
        <div class="search-box">
            <a href="/"><img src="image/icon2.png" alt="" class="logo"></a>
            <input type="text" class="form-control">
            <span class="input-group-text">
                <i class="fa fa-search" aria-hidden="true"></i>
            </span>
        </div>

        <!-- <div class="dropdown" style="float:right;">
            <button class="dropbtn">lamnhatty<i class="fa fa-sort-desc" aria-hidden="true"></i></button>
            <div class="dropdown-content" style="right:1px;">
                <a href="">Đăng xuất</a>
            </div>
        </div> -->

        <!-- <div class="menu-bar">
            <ul>
                <li><a class="userName" href="http://localhost:3000/login">Lâm Nhật Ty</a><span class="dropdown-icon"><i class="fa fa-caret-down" aria-hidden="true"></i></span></li>
            </ul>
        </div> -->

        <div class="dropdown">
            <button onclick="myFunction()" class="dropbtn"><span class="dropbtn-content">Lâm Nhật Ty</span><i
                    class="fa fa-caret-down" aria-hidden="true"></i></button>
            <div id="myDropdown" class="dropdown-content">
                <a href="#">Đăng xuất</a>
            </div>
        </div>
    </div>

    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Tên</th>
                <th scope="col">Giá</th>
                <th scope="col">Thao tác</th>
            </tr>
        </thead>
        <tbody class="allrow">
            <tr>
                <th scope="row">1</th>
                <td>Larry</td>
                <td>the Bird</td>
                <td>
                    <a class="delbtn" onclick="document.getElementById('id02').style.display='block'"><i class="fa fa-pencil-square-o"
                            aria-hidden="true"></i></a>
                    <a onclick="document.getElementById('id03').style.display='block'"><i class="fa fa-trash-o"
                            aria-hidden="true"></i></a>
                </td>
            </tr>
            <tr>
                <th scope="row">2</th>
                <td></td>
                <td></td>
                <td><a href="#" class="addProduct" onclick="document.getElementById('id01').style.display='block'">Thêm
                        sản phẩm</td>
            </tr>
        </tbody>
    </table>
    <!-- upload dialog  -->
    <div id="id01" class="modal">
        <form class="modal-content animate container" action="">
            <h1>Đăng sản phẩm<span onclick="document.getElementById('id01').style.display='none'" class="close"
                    title="Đóng cửa sổ">&times;</span></h1>

            <!-- <label for="name"><b>Tên</b></label> -->
            <input type="text" placeholder="Nhập tên sản phẩm" id="nameId" name="name" required=""
                oninvalid="this.setCustomValidity('Vui lòng nhập tên sản phẩm')" oninput="setCustomValidity('')">

            <!-- <label for="price"><b>Giá</b></label> -->
            <input type="text" placeholder="Nhập giá sản phẩm" name="price" id="priceId" required=""
                oninvalid="this.setCustomValidity('Vui lòng nhập giá sản phẩm')" oninput="setCustomValidity('')"
                onkeypress="return isNumberKey(event)">

            <!-- <label for="phone"><b>Điện thoại</b></label> -->
            <input type="text" placeholder="Nhập số điện thoại" name="phone" id="phonenumberId" required=""
                oninvalid="this.setCustomValidity('Vui lòng nhập số điện thoại liên hệ')"
                oninput="setCustomValidity('')" onkeyup="return displayWordCounter();"
                onkeypress="return isNumberKey(event)">

            <label for="imageUpload" class="btn btn-primary btn-block chooseFile" id="Label1">Nhấp vào đây để chọn
                ảnh</label>
            <input type="file" accept="image/*" name="photo" required="" id="imageUpload" style="display: none"
                oninvalid="this.setCustomValidity('Vui lòng chọn hình ảnh')" oninput="setCustomValidity('')">

            <button id="upload" type="submit" class="btn">Đăng</button>
        </form>
    </div>

    <!-- editDialog -->
    <div id="id02" class="modal">
        <form class="modal-content animate container" action="">
            <h1>Chỉnh sửa<span onclick="document.getElementById('id02').style.display='none'" class="close"
                    title="Đóng cửa sổ">&times;</span></h1>

            <!-- <label for="name"><b>Tên</b></label> -->
            <input type="text" placeholder="Nhập tên sản phẩm" id="nameId" name="name" required=""
                oninvalid="this.setCustomValidity('Vui lòng nhập tên sản phẩm')" oninput="setCustomValidity('')">

            <!-- <label for="price"><b>Giá</b></label> -->
            <input type="text" placeholder="Nhập giá sản phẩm" name="price" id="priceId" required=""
                oninvalid="this.setCustomValidity('Vui lòng nhập giá sản phẩm')" oninput="setCustomValidity('')"
                onkeypress="return isNumberKey(event)">

            <!-- <label for="phone"><b>Điện thoại</b></label> -->
            <input type="text" placeholder="Nhập số điện thoại" name="phone" id="phonenumberId" required=""
                oninvalid="this.setCustomValidity('Vui lòng nhập số điện thoại liên hệ')"
                oninput="setCustomValidity('')" onkeyup="return displayWordCounter();"
                onkeypress="return isNumberKey(event)">

            <label for="imageUpload" class="btn btn-primary btn-block chooseFile" id="Label1">Nhấp vào đây để chọn
                ảnh</label>

            <input type="file" accept="image/*" name="photo" required="" id="imageUpload" style="display: none"
                oninvalid="this.setCustomValidity('Vui lòng chọn hình ảnh')" oninput="setCustomValidity('')">
            <button id="upload" type="submit" class="btn">Đăng</button>
        </form>
    </div>

    <!-- deleteRow Dialog -->
    <div id="id03" class="delete">
        <form class="deleteDialog container" action="">
            <h4>Bạn có chắc muốn xóa sản phẩm<span onclick="document.getElementById('id03').style.display='none'"
                    class="close" title="Đóng cửa sổ">&times;</span></h4>
            <button id="upload" type="submit" class="btn">Xóa</button>
        </form>
    </div>


    <section class="footer">
        Phiên bản 1.0.0 - Được phát triển bởi VNT_team - 2019
    </section>
</body>

<script>
    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
        return true;
    }

    // validate phone number
    var setTotalNumberOfWordCounter = "10";
    function displayWordCounter() {
        var textValue = document.getElementsByName("phone")[0].value;
        textValue = textValue.replace(/ /g, '');
        var gettextLength = textValue.length;

        if (gettextLength == setTotalNumberOfWordCounter) {
            textValue = textValue.replace(/(\d{4})(\d{3})(\d{3})/, "$1 $2 $3");
            document.getElementsByName("phone")[0].value = textValue;
        }

        if (gettextLength > setTotalNumberOfWordCounter) {
            textValue = textValue.replace(/ /g, '');
            textValue = textValue.substring(0, setTotalNumberOfWordCounter);
            textValue = textValue.replace(/(\d{4})(\d{3})(\d{3})/, "$1 $2 $3");
            document.getElementsByName("phone")[0].value = textValue;
            return false;
        }
    }

    // format price
    $('#priceId').keyup(function () {
        var a = $(this).val();
        document.getElementById('priceId').style.borderColor = "#ccc";
        document.getElementById('priceId').style.backgroundColor = "#f1f1f1";
        var temp = a.replace(/,/g, '');
        var curren = temp.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,');
        document.getElementById("priceId").value = curren;
    });

    $('#nameId').keyup(function () {
        document.getElementById('nameId').style.borderColor = "#ccc";
        document.getElementById('nameId').style.backgroundColor = "#f1f1f1";
    });

    $('#phonenumberId').keyup(function () {
        document.getElementById('phonenumberId').style.borderColor = "#ccc";
        document.getElementById('phonenumberId').style.backgroundColor = "#f1f1f1";
    });

    // format phone number
    // $('#phonenumberId').keyup(function () {
    //     var a = $(this).val();
    //     var temp = a.replace(/ /g, '');
    //     console.log(a + "  " + temp);
    //     if(temp.length==10){
    //         var result = temp.replace(/(\d{4})(\d{3})(\d{3})/, "$1 $2 $3");
    //         document.getElementById("phonenumberId").value = result;
    //     }
    // });

    // file
    $(document).ready(function () {
        $('input[type="file"]').change(function (e) {
            var fileName = e.target.files[0].name;
            document.getElementById('Label1').innerHTML = fileName;
            document.getElementById('Label1').style.borderColor = "#ccc";
            document.getElementById('Label1').style.backgroundColor = "#f1f1f1";
        });
    });

    //check empty file
    $('#upload').bind("click", function () {
        var imgVal = $('#imageUpload').val();
        var nameVal = $('#nameId').val();
        var priceVal = $('#priceId').val();
        var phoneNumberVal = $('#phonenumberId').val();
        var check = true;

        if (imgVal == '') {
            document.getElementById('Label1').style.borderColor = "#ff5c33";
            document.getElementById('Label1').style.backgroundColor = "#ffd6cc";
            document.getElementById('Label1').innerHTML = "Bạn chưa chọn ảnh";
            check = false;
        }

        if (nameVal == '') {
            document.getElementById('nameId').style.backgroundColor = "#ffd6cc";
            check = false;
        }

        if (priceVal == '') {
            document.getElementById('priceId').style.backgroundColor = "#ffd6cc";
            check = false;
        }

        if (phoneNumberVal == '') {
            document.getElementById('phonenumberId').style.backgroundColor = "#ffd6cc";
            check = false;
        }
        return check;
    })

    // edit product
    jQuery('.delbtn').on('click', function () {
        var $row = jQuery(this).closest('tr');
        var $columns = $row.find('td');

        $columns.addClass('row-highlight');
        var values = "";

        jQuery.each($columns, function (i, item) {
            alert(i + " " + item.innerHTML);
        });
    });
</script>
</html>